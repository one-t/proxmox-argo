apiVersion: v1
kind: Namespace
metadata:
  name: cringe-meter
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: cringe-meter
  namespace: demo-apps
data:
  nginx.conf: |-
    server {
        listen 80;
        server_name _;
        root /usr/share/nginx/html;
        index index.html;
        
        location / {
            try_files $uri $uri/ /index.html;
        }
        
        location /api/hostname {
            default_type text/plain;
            alias /usr/share/nginx/html/hostname.txt;
        }
    }
  index.html: |-
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>üò¨ Cringe Meter</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font-family: 'Arial', sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #fff;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 20px;
            }
            .container {
                max-width: 800px;
                width: 100%;
                text-align: center;
            }
            h1 {
                font-size: 3em;
                margin-bottom: 10px;
                text-shadow: 0 0 20px rgba(0,0,0,0.3);
            }
            .subtitle {
                font-size: 1.2em;
                margin-bottom: 40px;
                opacity: 0.9;
            }
            .input-area {
                margin: 30px 0;
            }
            textarea {
                width: 100%;
                height: 150px;
                padding: 15px;
                font-size: 1.1em;
                border: 3px solid rgba(255,255,255,0.3);
                background: rgba(255,255,255,0.9);
                color: #333;
                border-radius: 10px;
                font-family: 'Arial', sans-serif;
                resize: vertical;
            }
            textarea:focus {
                outline: none;
                border-color: #fff;
                background: #fff;
            }
            .analyze-button {
                margin: 20px 0;
                padding: 15px 40px;
                font-size: 1.5em;
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                border: none;
                border-radius: 10px;
                color: white;
                cursor: pointer;
                font-weight: bold;
                transition: all 0.3s;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            }
            .analyze-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            }
            .results {
                margin: 30px 0;
                padding: 30px;
                background: rgba(255,255,255,0.1);
                border-radius: 15px;
                min-height: 300px;
                backdrop-filter: blur(10px);
            }
            .meter-container {
                margin: 30px 0;
            }
            .meter-label {
                font-size: 1.5em;
                margin-bottom: 15px;
                font-weight: bold;
            }
            .meter {
                width: 100%;
                height: 50px;
                background: rgba(255,255,255,0.2);
                border-radius: 25px;
                overflow: hidden;
                position: relative;
            }
            .meter-fill {
                height: 100%;
                background: linear-gradient(90deg, #4ade80 0%, #facc15 50%, #f87171 75%, #dc2626 100%);
                border-radius: 25px;
                transition: width 1s ease-out;
                display: flex;
                align-items: center;
                justify-content: flex-end;
                padding-right: 15px;
                font-size: 1.2em;
                font-weight: bold;
            }
            .cringe-level {
                font-size: 3em;
                margin: 20px 0;
                font-weight: bold;
                text-shadow: 0 0 20px rgba(255,255,255,0.5);
            }
            .analysis {
                font-size: 1.3em;
                margin: 20px 0;
                line-height: 1.6;
                padding: 20px;
                background: rgba(0,0,0,0.2);
                border-radius: 10px;
            }
            .examples {
                margin-top: 30px;
                text-align: left;
                padding: 20px;
                background: rgba(255,255,255,0.05);
                border-radius: 10px;
            }
            .example-button {
                margin: 5px;
                padding: 8px 15px;
                background: rgba(255,255,255,0.2);
                border: none;
                border-radius: 5px;
                color: white;
                cursor: pointer;
                transition: all 0.2s;
            }
            .example-button:hover {
                background: rgba(255,255,255,0.3);
            }
            .pod-info {
                margin-top: 30px;
                padding: 15px;
                background: rgba(0,0,0,0.2);
                border-radius: 5px;
                font-size: 0.9em;
            }
            .hidden {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üò¨ CRINGE METER üò¨</h1>
            <p class="subtitle">Paste your text and discover your cringe level</p>
            
            <div class="input-area">
                <textarea id="inputText" placeholder="Paste your LinkedIn post, tweet, email, or any text here..."></textarea>
            </div>
            
            <button class="analyze-button" onclick="analyzeCringe()">ANALYZE CRINGE üîç</button>
            
            <div class="examples">
                <strong>Try these examples:</strong><br>
                <button class="example-button" onclick="useExample(0)">LinkedIn Humble Brag</button>
                <button class="example-button" onclick="useExample(1)">Tech Bro Speak</button>
                <button class="example-button" onclick="useExample(2)">Corporate Email</button>
                <button class="example-button" onclick="useExample(3)">Startup Pitch</button>
            </div>
            
            <div class="results hidden" id="results">
                <div class="meter-container">
                    <div class="meter-label">CRINGE LEVEL</div>
                    <div class="meter">
                        <div class="meter-fill" id="meterFill" style="width: 0%">
                            <span id="percentage">0%</span>
                        </div>
                    </div>
                </div>
                <div class="cringe-level" id="cringeLevel"></div>
                <div class="analysis" id="analysis"></div>
            </div>
            
            <div class="pod-info">
                üéØ Cringe analyzed by pod: <strong><span id="hostname">Loading...</span></strong>
            </div>
        </div>

        <script>
            const examples = [
                "Blessed and humbled to announce that I've been promoted to Senior Rockstar Ninja Developer! üöÄ So grateful for this journey. Remember, hard work pays off! #blessed #gratitude #techlife #hustle",
                "We're not just disrupting the space, we're revolutionizing the paradigm of synergistic cloud-native microservices to leverage blockchain AI for maximum value extraction. Let's circle back on this.",
                "Hi team,\n\nPer my last email, I wanted to touch base and reach out about the action items we discussed. Let's take this offline and schedule a sync to drill down on the deliverables. Thoughts?\n\nBest,\nManagement",
                "We're like Uber but for dogs. We're going to disrupt the $500 billion pet industry with our innovative AI-powered blockchain platform. We just need $10 million in seed funding. Revenue? That comes later. We're in growth mode."
            ];
            
            function useExample(index) {
                document.getElementById('inputText').value = examples[index];
            }
            
            function analyzeCringe() {
                const text = document.getElementById('inputText').value.trim();
                
                if (!text) {
                    alert('Please enter some text to analyze!');
                    return;
                }
                
                const results = document.getElementById('results');
                results.classList.remove('hidden');
                
                let score = calculateCringeScore(text);
                
                setTimeout(() => {
                    document.getElementById('meterFill').style.width = score + '%';
                    document.getElementById('percentage').textContent = score + '%';
                    
                    const level = getCringeLevel(score);
                    const analysis = getCringeAnalysis(text, score);
                    
                    document.getElementById('cringeLevel').textContent = level;
                    document.getElementById('analysis').innerHTML = analysis;
                }, 100);
            }
            
            function calculateCringeScore(text) {
                let score = 0;
                const lowerText = text.toLowerCase();
                
                const cringeWords = {
                    'blessed': 15, 'humbled': 15, 'grateful': 12, 'journey': 10,
                    'hustle': 12, 'grind': 12, 'rockstar': 20, 'ninja': 20, 'guru': 18,
                    'disrupt': 15, 'paradigm': 18, 'synergy': 20, 'leverage': 12,
                    'circle back': 15, 'touch base': 12, 'per my last email': 25,
                    'blockchain': 15, 'ai-powered': 10, 'revolutionary': 12,
                    'game-changer': 15, 'innovative': 8, 'cutting-edge': 10,
                    'reach out': 8, 'loop in': 10, 'drill down': 12, 'deep dive': 12,
                    'bandwidth': 15, 'alignment': 10, 'deliverable': 8,
                    'thought leader': 20, 'influencer': 12, 'personal brand': 15,
                    'growth hacking': 18, 'move the needle': 15, 'low-hanging fruit': 20
                };
                
                for (const [word, points] of Object.entries(cringeWords)) {
                    if (lowerText.includes(word)) {
                        score += points;
                    }
                }
                
                const emojiCount = (text.match(/[\u{1F300}-\u{1F9FF}]/gu) || []).length;
                score += emojiCount * 3;
                
                const hashtagCount = (text.match(/#\w+/g) || []).length;
                score += hashtagCount * 5;
                
                const exclamationCount = (text.match(/!/g) || []).length;
                if (exclamationCount > 3) score += (exclamationCount - 3) * 2;
                
                if (lowerText.includes('10x') || lowerText.includes('100x')) score += 15;
                if (lowerText.includes('unicorn') && lowerText.includes('startup')) score += 20;
                
                return Math.min(score, 100);
            }
            
            function getCringeLevel(score) {
                if (score < 20) return 'üòä Acceptable';
                if (score < 40) return 'üò¨ Mild Cringe';
                if (score < 60) return 'üò∞ Significant Cringe';
                if (score < 80) return 'üö® MAXIMUM CRINGE';
                return 'üíÄ TERMINAL CRINGE';
            }
            
            function getCringeAnalysis(text, score) {
                const analyses = [];
                const lowerText = text.toLowerCase();
                
                if (lowerText.includes('blessed') || lowerText.includes('humbled')) {
                    analyses.push("Classic humble-brag detected. Nobody believes you're actually humble.");
                }
                if (lowerText.includes('rockstar') || lowerText.includes('ninja') || lowerText.includes('guru')) {
                    analyses.push("Job titles aren't Pokemon. You don't need to collect them all.");
                }
                if (lowerText.includes('disrupt') || lowerText.includes('paradigm')) {
                    analyses.push("Tech bro buzzword overload. Please drink water and touch grass.");
                }
                if (lowerText.includes('per my last email')) {
                    analyses.push("Passive-aggressive email language detected. We all know what this really means.");
                }
                if (lowerText.includes('circle back') || lowerText.includes('touch base')) {
                    analyses.push("Corporate speak alert! This meeting could have been an email.");
                }
                
                const hashtagCount = (text.match(/#\w+/g) || []).length;
                if (hashtagCount > 5) {
                    analyses.push(`${hashtagCount} hashtags?! This isn't 2014 Instagram.`);
                }
                
                const emojiCount = (text.match(/[\u{1F300}-\u{1F9FF}]/gu) || []).length;
                if (emojiCount > 5) {
                    analyses.push("Emoji overload. Your message is drowning in tiny pictograms.");
                }
                
                if (lowerText.includes('blockchain') && lowerText.includes('ai')) {
                    analyses.push("Blockchain + AI? Are you trying to speedrun buzzword bingo?");
                }
                
                if (analyses.length === 0) {
                    if (score < 20) {
                        return "Surprisingly normal! Your text is refreshingly free of cringe.";
                    }
                    return "General cringe vibes detected. Nothing specific, just... the vibe is off.";
                }
                
                return analyses.join('<br><br>');
            }
            
            function updateHostname() {
                fetch('/cringe-meter/api/hostname')
                    .then(response => response.text())
                    .then(hostname => {
                        document.getElementById('hostname').textContent = hostname.trim();
                    })
                    .catch(() => {
                        document.getElementById('hostname').textContent = 'unknown';
                    });
            }
            
            updateHostname();
            setInterval(updateHostname, 5000);
        </script>
    </body>
    </html>
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: cringe-meter-hostname
  namespace: demo-apps
data:
  01-hostname.sh: |-
    #!/bin/sh
    echo -n "$HOSTNAME" > /usr/share/nginx/html/hostname.txt
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: cringe-meter
  namespace: demo-apps
spec:
  replicas: 2
  selector:
    matchLabels:
      app: cringe-meter
  template:
    metadata:
      labels:
        app: cringe-meter
    spec:
      containers:
      - name: nginx
        image: nginx:alpine
        ports:
        - containerPort: 80
        volumeMounts:
        - name: nginx-config
          mountPath: /etc/nginx/conf.d/default.conf
          subPath: nginx.conf
        - name: html
          mountPath: /usr/share/nginx/html/index.html
          subPath: index.html
        - name: hostname-script
          mountPath: /docker-entrypoint.d/01-hostname.sh
          subPath: 01-hostname.sh
      volumes:
      - name: nginx-config
        configMap:
          name: cringe-meter
      - name: html
        configMap:
          name: cringe-meter
      - name: hostname-script
        configMap:
          name: cringe-meter-hostname
          defaultMode: 0755
---
apiVersion: v1
kind: Service
metadata:
  name: cringe-meter
  namespace: demo-apps
spec:
  selector:
    app: cringe-meter
  ports:
  - protocol: TCP
    port: 80
    targetPort: 80
